# ********RoostGPT********

# Test generated by RoostGPT for test karateIntegration using AI Type Azure Open AI and AI Model roost-gpt4-32k
# 
# ROOST_METHOD_HASH=102a7facd9
# ROOST_METHOD_SIG_HASH=b36dcf6e4b
# 
#    ########## Scenario ##########  
# 
# {
#   background: 'Given the base URL is "http://localhost:8080"',
#   rule: null,
#   scenario: 'Get all products\r\n' +
#     '        When the client sends a GET request "/api/products" to get the list of all products\r\n' +
#     '        Then the list of products returned should be empty',
#   title: 'Get all products'
# }
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  plugins:
    expect: {}
  payload:
    path: "GetAllProducts.csv"
    fields:
      - "productId"
      - "productName"
  processors: {}
  
scenarios:
  - name: "Scenario: Get all products, expected to be empty"
    flow:
      # authorization
      - post: "/authToken"
        headers:
          Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
        expect: 
          - statusCode: 200
          - hasProperty: 'token'
        capture:
          - json: "$.token"
            as: "authToken"
        log: "Got the auth token"
      - think: 1

      # request to api/products
      - get: "/api/products"
        headers:
          Authorization: "Bearer {{ authToken }}"
        expect: 
          - statusCode: 200
          - hasProperty: 'products'
          - equals: 
              - "products"
              - []
        log: "Product list returned is empty"
      - think: 1
